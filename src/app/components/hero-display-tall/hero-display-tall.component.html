@let activeHero = liveHeroData();

@if(activeHero) {
<div class="card foreground shadow-xl flex-1">
  <div class="card-body">
    <div class="absolute top-5 right-5">
      <app-hero-art [id]="activeHero.id"></app-hero-art>
    </div>

    <div class="card-title">
      {{ activeHero.name }}
    </div>

    <div>
      Level {{ activeHero.level | number }} / {{ activeHero.maxLevel | number }}
      [{{ activeHero.xp | number }} / {{ activeHero.maxXp | number }} XP]
    </div>

    <div>
      <app-damage-type [damage]="activeHero.stats.force" [id]="activeHero.damageTypeId" [editable]="canEditHeroStats()"
        (idChange)="changeMainCharacterType($event)"></app-damage-type>
    </div>

    <div class="italic">
      @if(currentHeroTask(); as taskName) {
      Currently assigned to {{ taskName }}.
      }

      @else {
      Currently idle.
      }
    </div>

    <div>
      @for(arch of activeHero.archetypeIds; track $index) {
      <app-archetype-display class="mr-1" [id]="arch"></app-archetype-display>
      }
    </div>

    <div class="flex">
      <table class="table flex-1">
        <tbody>
          @for(stat of gameStats; track $index) {
          <tr>
            <td class="pl-0">{{ stat | titlecase }}</td>
            <td class="text-right">{{ activeHero.stats[stat] | number }}</td>
          </tr>
          }
        </tbody>
      </table>

      <div class="flex-1"></div>
    </div>

    <div>
      @for(task of allHeroTaskLevels(); track $index) {
      <app-hero-task-level-display class="mr-1" [id]="task" [hero]="activeHero"></app-hero-task-level-display>
      }
    </div>
  </div>
</div>
}
